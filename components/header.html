<header class="site-header" id="site-header">
  <div class="header-inner">
    
    <!-- Logo/Brand -->
    <a href="index.html" class="brand" aria-label="DVAYD Publishing Home">
      <img src="../assets/images/branding/dva-logo.png" alt="DVAYD Logo" class="brand-logo">
      <span class="brand-name">DVAYD Publishing</span>
    </a>

    <!-- Right Side: Search, Theme, Languages, Menu -->
    <div class="header-right">
      
      <!-- Search Bar -->
      <div class="search-wrapper">
        <form class="search-form" role="search">
          <input 
            type="search" 
            class="search-input" 
            placeholder="Suchbegriff eingeben" 
            aria-label="Suche"
            id="headerSearchInput"
          >
          <button type="submit" class="search-btn" aria-label="Suchen">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
          </button>
          
          <!-- Search Results Dropdown -->
          <div class="search-dropdown" id="searchDropdown"></div>
        </form>
      </div>

      <!-- Theme Toggle -->
      <button class="theme-toggle" id="themeToggle" type="button" aria-label="Theme umschalten">
        <span class="theme-icon theme-icon-moon">ğŸŒ™</span>
        <span class="theme-icon theme-icon-sun">â˜€ï¸</span>
      </button>

      <!-- Language Switcher (Desktop) -->
      <div class="lang-switcher">
        <a href="#" data-lang="de" class="lang-link is-active">DE</a>
        <span class="lang-sep">|</span>
        <a href="#" data-lang="en" class="lang-link">EN</a>
        <span class="lang-sep">|</span>
        <a href="#" data-lang="tr" class="lang-link">TR</a>
        <span class="lang-sep">|</span>
        <a href="#" data-lang="fr" class="lang-link">FR</a>
      </div>

      <!-- Mobile Menu Button -->
      <button class="menu-toggle" id="menuToggle" type="button" aria-label="MenÃ¼" aria-expanded="false">
        <span class="menu-icon">
          <span></span>
          <span></span>
          <span></span>
        </span>
      </button>
    </div>
  </div>
</header>

<!-- Mobile Menu Overlay -->
<div class="menu-overlay" id="menuOverlay"></div>

<!-- Mobile Menu Drawer -->
<aside class="menu-drawer" id="menuDrawer">
  <div class="drawer-header">
    <h2 class="drawer-title">MenÃ¼</h2>
    <button class="drawer-close" id="drawerClose" type="button" aria-label="SchlieÃŸen">âœ•</button>
  </div>
  
  <nav class="drawer-nav">
    <a href="index.html" class="drawer-link">Startseite</a>
    <a href="ueber-uns.html" class="drawer-link">Ãœber uns</a>
    <a href="projekte.html" class="drawer-link">Projekte</a>
    <a href="konfigurator-page.html" class="drawer-link">Konfigurator</a>
    <a href="kontakt.html" class="drawer-link">Kontakt</a>
    <a href="blog/" class="drawer-link">Blog</a>
  </nav>
</aside>

<!-- Header JavaScript -->
<script>
(function() {
  'use strict';
  
  // Theme Toggle
  const themeToggle = document.getElementById('themeToggle');
  if (themeToggle) {
    themeToggle.addEventListener('click', () => {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      const newTheme = currentTheme === 'dim' ? 'light' : 'dim';
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('dvayd_theme', newTheme);
    });
  }
  
  // Mobile Menu
  const menuToggle = document.getElementById('menuToggle');
  const menuOverlay = document.getElementById('menuOverlay');
  const menuDrawer = document.getElementById('menuDrawer');
  const drawerClose = document.getElementById('drawerClose');
  
  function openMenu() {
    if (menuOverlay) menuOverlay.classList.add('is-open');
    if (menuDrawer) menuDrawer.classList.add('is-open');
    if (menuToggle) menuToggle.setAttribute('aria-expanded', 'true');
    document.body.style.overflow = 'hidden';
  }
  
  function closeMenu() {
    if (menuOverlay) menuOverlay.classList.remove('is-open');
    if (menuDrawer) menuDrawer.classList.remove('is-open');
    if (menuToggle) menuToggle.setAttribute('aria-expanded', 'false');
    document.body.style.overflow = '';
  }
  
  if (menuToggle) menuToggle.addEventListener('click', openMenu);
  if (drawerClose) drawerClose.addEventListener('click', closeMenu);
  if (menuOverlay) menuOverlay.addEventListener('click', closeMenu);
  
  // Close on ESC
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && menuDrawer?.classList.contains('is-open')) {
      closeMenu();
    }
  });
  
  // Header scroll behavior
  let lastScroll = 0;
  const header = document.getElementById('site-header');
  
  window.addEventListener('scroll', () => {
    const currentScroll = window.pageYOffset;
    
    if (currentScroll > 100) {
      header?.classList.add('is-scrolled');
    } else {
      header?.classList.remove('is-scrolled');
    }
    
    if (currentScroll > lastScroll && currentScroll > 200) {
      header?.classList.add('is-hidden');
    } else {
      header?.classList.remove('is-hidden');
    }
    
    lastScroll = currentScroll;
  }, { passive: true });
  
  // Search functionality (basic)
  const searchInput = document.getElementById('headerSearchInput');
  const searchForm = document.querySelector('.search-form');
  const searchDropdown = document.getElementById('searchDropdown');
  
  if (searchForm) {
    searchForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const query = searchInput?.value.trim();
      if (query) {
        // Redirect to blog search or search page
        window.location.href = `blog/?s=${encodeURIComponent(query)}`;
      }
    });
  }
  
  // Active link highlighting
  const currentPath = window.location.pathname;
  const drawerLinks = document.querySelectorAll('.drawer-link');
  
  drawerLinks.forEach(link => {
    const href = link.getAttribute('href');
    if (currentPath.includes(href) && href !== 'index.html') {
      link.classList.add('is-active');
    } else if (currentPath.endsWith('/') && href === 'index.html') {
      link.classList.add('is-active');
    }
  });
  
  console.log('âœ… Header initialized');
})();
</script>